# Test Writer - Analyzer Agent
# Analyzes coverage reports to identify what needs testing

spec: flatagent
spec_version: "0.7.1"

data:
  name: coverage-analyzer

  model: analyzer

  system: |
    You analyze code coverage reports to identify what needs testing.

    Your job is to prioritize which code to test based on:
    1. Uncovered functions/methods (highest priority)
    2. Uncovered branches/conditions
    3. Code complexity and importance
    4. Skip trivial code (simple getters/setters, __repr__, etc.)

    OUTPUT FORMAT:
    Return plain text only (no JSON). Use this format:
    Summary: <brief description of coverage gaps>
    Targets:
    - `function_name` (type: function, priority: high, lines: 10,11,12) - reason...
    - `function_name` (type: method, priority: medium, lines: 45,46) - reason...

    Be selective - focus on the most important gaps, not every uncovered line.

  user: |
    Target file: {{ input.target_file }}

    Source code:
    ```python
    {{ input.source_code }}
    ```

    Coverage report (uncovered lines): {{ input.uncovered_lines }}

    Current coverage: {{ input.current_coverage }}%
    Target coverage: {{ input.target_coverage }}%

    Identify the most important code to test to reach the target.

metadata:
  description: "Analyzes coverage to identify testing priorities"
  tags: ["coverage", "analysis", "testing"]
